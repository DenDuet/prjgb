{% extends 'recipe/base.html' %}

{% block title %}
  {{ title }}
{% endblock %}

{% block content %}
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
      <form class="row g-3 needs-validation" action="/recipe/create/" method="post" enctype="multipart/form-data">
        <input type="text" class="form-control" name="path_url" id="path_url" value="{{path_url}}" hidden />
        {% csrf_token %}

        <div class="row">
          <h4 class="h4 col-md-5 ur_edit">Новый рецепт</h4>
          <div class="col-md-3">
            <button class="btn btn-secondary ur_edit" type="submit">Сохранить</button>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <label for="name" class="form-label">Наименование</label>
            <input type="text" class="form-control" name="name" id="name" placeholder="Напишите название" required />
            <label for="make_time" class="form-label">Время приготовления</label>
            <input type="text" class="form-control" name="make_time" id="make_time" placeholder="Время приготовления" required />              
            <label for="description" class="form-label">Описание</label>
            <textarea class="form-control" id="description" name="description" rows="4" required></textarea>
            <label for="steps" class="form-label">Этапы приготовления"</label>
            <textarea class="form-control" id="steps" name="steps" rows="4" required></textarea>
            <label for="ingredients" class="form-label">Ингредиенты</label>
            <textarea class="form-control" id="ingredients" name="ingredients" rows="4" required></textarea> 
        
          </div>
          <div class="col-md-6">
            {% comment %} <div class="ur_edit">
              <img src="{{ recipe.image }}" width="90%" alt="{{ ones.image }}" />
            </div> {% endcomment %}
            <div class="col-md-2 ur_edit">
              <label for="image" class="form-label">Загрузите фото</label>
              <input type="file" class="form-control input_button" id="image" name="image" >
            </div>
            {% comment %} <div class="stage">
              <label for="journal" class="form-label col-md-5">Категории</label>
    
              <a class="btn btn-primary btn-md col-md-2" href="/recipe/create_jrn/{{ recipe.id }}/" role="button">Добавить категорию</a>
              <div>
                <table id="myTable" class="table table-bordered table-hover">
                  <thead>
                    <tr>
                      <th >Категория</th>
                      <th >Описание</th>
                      <th >Действие</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for stage in stages %}
                      <tr class="clickable" onclick="window.location='/recipe/edit_jrn/{{ recipe.id }}/{{ stage.id }}/'">
                        <td>{{ stage.category_name }}</td>
                        <td>{{ stage.description }}</td>
                        <td class="td_button">
                            <a type="button" class="btn image-button del_button_url" data-bs-toggle="tooltip" data-bs-placement="left" title="Удалить этап" href="/recipe/delete_jrn/{{ stage.id }}/"></a>  
                        </td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>             {% endcomment %}
          </div>
        </div>


       
      </form>

      {% comment %} <form method="post" action="/upload/{{ recipe.id }}/" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="row">
          <div class="col-md-2">
            <label for="image" class="form-label">Загрузить фото</label>
            <input type="file" class="form-control input_button" id="image" name="image" >
          </div>
          <div class="col-md-2">
            <button class="btn btn-secondary ur_edit" type="submit">Загрузить</button>
          </div>
        </div>
      </form> {% endcomment %}
      

        {% comment %} <div class="image">
          <a href="/upload/{{ ones.id }}/">Загрузить изображение</a>
        </div> {% endcomment %}
      {% comment %} <div class="parent">
        <div class="form-label bordered col-md-3 ">

          <label for="docs_load" class="form-label col-md-6">Скачать документ:</label>
          <input type="text" class="form-control input_button margin_button" id="docs_load" name="docs_load" value=" {{project.load_docs}} " disabled>

          <button type="button" data-bs-toggle="tooltip" data-bs-placement="left" title="Скачать файл на компьютер" class="btn image-button dwnl_button_url margin_button" name="upload_file" id="upload_file"></button>

          <button type="button" data-bs-toggle="tooltip" data-bs-placement="left" title="Удалить файл из базы и убрать подтверждение" class="btn image-button del_button_url margin_button" name="delete_file" id="delete_file"></button>
      </div>
    </div> {% endcomment %}
  {% comment %} </div>  {% endcomment %}



    </div>


  </div>


  {% comment %} <script> {% endcomment %}
    {% comment %} let csrftoken = $("[name=csrfmiddlewaretoken]").val(); {% endcomment %}
    {% comment %} let table = new DataTable('#myTable');

</script>  {% endcomment %}

{% endblock %}
